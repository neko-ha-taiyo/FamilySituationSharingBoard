<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家族状況共有</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>家族状況共有</h1>
            <button id="settingsBtn" class="settings-btn">⚙️ 設定</button>
        </header>

        <nav class="tab-navigation">
            <button id="currentTab" class="tab-btn active">現在</button>
            <button id="historyTab" class="tab-btn">履歴</button>
        </nav>

        <div id="mainView">
            <section class="status-display">
                <h2>家族の状況</h2>
                <div id="familyStatus" class="family-status">
                    <!-- 家族の状況がここに表示されます -->
                </div>
            </section>

            <section class="my-status">
                <h2>自分の状況を更新</h2>
                <div class="user-select">
                    <label for="userName">名前:</label>
                    <select id="userName">
                        <option value="">選択してください</option>
                        <option value="たー">たー</option>
                        <option value="はー">はー</option>
                    </select>
                </div>

                <!-- 今何をしているか -->
                <div class="activity-section">
                    <h3>今何をしているか</h3>
                    <div class="activity-buttons">
                        <button class="activity-btn home" data-activity="在宅">🏠 在宅</button>
                        <button class="activity-btn work" data-activity="仕事中">💼 仕事中</button>
                        <button class="activity-btn meeting" data-activity="会議中">📞 会議中</button>
                        <button class="activity-btn out" data-activity="移動中">🚶 移動中</button>
                        <button class="activity-btn shopping" data-activity="買い物">🛒 買い物</button>
                        <button class="activity-btn eating" data-activity="食事中">🍽️ 食事中</button>
                        <button class="activity-btn sleep" data-activity="就寝中">😴 就寝中</button>
                        <button class="activity-btn toilet" data-activity="トイレ">🚽 トイレ</button>
                        <button class="activity-btn other" data-activity="その他">❓ その他</button>
                    </div>
                </div>

                <!-- 今の状態 -->
                <div class="state-section">
                    <h3>今の状態</h3>
                    <div class="state-buttons">
                        <button class="state-btn ok" data-state="普通に話しかけてOK">✅ 普通に話しかけてOK</button>
                        <button class="state-btn chat" data-state="ちょっと話せる">💬 ちょっと話せる</button>
                        <button class="state-btn busy" data-state="忙しい">🔇 忙しい</button>
                        <button class="state-btn mood" data-state="機嫌悪い">😠 機嫌悪い</button>
                        <button class="state-btn sick" data-state="体調悪い">🤒 体調悪い</button>
                        <button class="state-btn tired" data-state="疲れてる">😫 疲れてる</button>
                        <button class="state-btn unaware" data-state="スマホ見れない">📵 スマホ見れない</button>
                        <button class="state-btn callme" data-state="気づいたら声かけて">🔔 気づいたら声かけて</button>
                    </div>
                </div>
            </section>
        </div>

        <div id="historyView" class="hidden">
            <section class="history-section">
                <h2>履歴</h2>

                <div class="history-filters">
                    <div class="filter-group">
                        <label for="historyMemberFilter">メンバー:</label>
                        <select id="historyMemberFilter">
                            <option value="">全員</option>
                            <option value="たー">たー</option>
                            <option value="はー">はー</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="historyDateFilter">期間:</label>
                        <select id="historyDateFilter">
                            <option value="today">今日</option>
                            <option value="week">過去7日間</option>
                            <option value="month">過去30日間</option>
                            <option value="all">全期間</option>
                        </select>
                    </div>
                </div>

                <div id="historyList" class="history-list">
                    <!-- 履歴がここに表示されます -->
                </div>

                <div class="history-pagination">
                    <button id="loadMoreHistory" class="btn-secondary hidden">さらに読み込む</button>
                </div>
            </section>
        </div>

        <div id="settingsView" class="hidden">
            <h2>設定</h2>
            <div class="settings-content">
                <div class="setting-item">
                    <p>リアルタイム更新: <strong>有効</strong></p>
                    <p class="setting-description">Server-Sent Events (SSE) により、変更が即座に反映されます。</p>
                </div>
                <div class="setting-buttons">
                    <button id="cancelSettings" class="btn-secondary">閉じる</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js?v=4"></script>
</body>
</html>
